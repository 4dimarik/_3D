(()=>{"use strict";new class{constructor({deadLine:t="2022-01-01",timerSelector:e,format:r={},separator:i=":"}){this.timerSelector=e,this.formatSelectors=r,this.separator=i,this.deadLine=t,this.init()}init(){this.timer=document.querySelector(this.timerSelector),this.format={},this.timer&&Object.keys(this.formatSelectors).forEach((t=>{let e=t.replace("Selector","");this.format[e]=this.timer.querySelector(this.formatSelectors[t])}))}start(){this.isDateHasCome()||(this.render(),this.updateClock=setInterval(this.render.bind(this),1e3))}stop(){clearInterval(this.updateClock)}render(){let t=new Date(this.deadLine).getTime(),e=(new Date).getTime();if(this.isDateHasCome(this.deadLine))this.stop();else{const r=this.getTimeRemaining(t,e);Object.keys(this.format).forEach((t=>{this.format[t].textContent=this.getTwoDigitNumber(r[t]),"seconds"!==t&&(this.format[t].nextElementSibling.textContent=this.setSeparator(this.format[t],r[t],t))}))}}getTimeRemaining(t,e){let r=(t-e)/1e3;return{days:Math.floor(r/60/60/24),hours:Math.floor(r/60/60%24),minutes:Math.floor(r/60%60),seconds:Math.floor(r%60)}}getTwoDigitNumber(t){return 1===String(t).length?`0${t}`:`${t}`}isDateHasCome(){return new Date(this.deadLine).getTime()<=(new Date).getTime()}setSeparator(t,e=null,r=null){return"name"!==this.separator?this.separator:this.getNameSeparator(e,r)}getNameSeparator(t,e){return((t,e)=>1===t||t>20&&1==+String(t)[1]?e[0]:t>1&&t<5||t>21&&+String(t)[1]>1&&+String(t)[1]<5?e[1]:0===t||t>4&&t<21||t>21&&+String(t)[1]>4||0==+String(t)[1]?e[2]:void 0)(t,{days:["день","дня","дней"],hours:["час","часа","часов"],minutes:["минута","минуты","минут"],seconds:["секунда","секунды","секунд"]}[e])}}({timerSelector:"#timer",format:{daysSelector:"#timer-days",hoursSelector:"#timer-hours",minutesSelector:"#timer-minutes",secondsSelector:"#timer-seconds"}}).start()})();