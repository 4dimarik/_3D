(()=>{"use strict";new class{constructor({deadLine:e="2021-12-27T18:35:00",timerSelector:t,format:r={},doubleZero:s=!0,separator:i=":"}){this.timerSelector=t,this.formatSelectors=r,this.separator=i,this.deadLine=e,this.doubleZero=s,this.init()}init(){this.timer=document.querySelector(this.timerSelector),this.format={},this.timer&&Object.keys(this.formatSelectors).forEach((e=>{let t=e.replace("Selector","");this.format[t]=this.timer.querySelector(this.formatSelectors[e])}))}start(){this.isDateHasCome()?this.render({days:"0",hours:"0",minutes:"0",seconds:"0"}):(this.handle(),this.updateClock=setInterval(this.handle.bind(this),1e3))}stop(){clearInterval(this.updateClock)}render(e){Object.keys(this.format).forEach((t=>{this.format[t].textContent=this.doubleZero?this.getTwoDigitNumber(e[t]):e[t],this.format[t].nextElementSibling.textContent=this.setSeparator(e[t],t)}))}handle(){if(this.isDateHasCome())this.stop();else{let e=new Date(this.deadLine).getTime(),t=(new Date).getTime();const r=this.getTimeRemaining(e,t);this.render(r)}}getTimeRemaining(e,t){let r=(e-t)/1e3;return{days:Math.floor(r/60/60/24),hours:Math.floor(r/60/60%24),minutes:Math.floor(r/60%60),seconds:Math.floor(r%60)}}getTwoDigitNumber(e){return 1===String(e).length?`0${e}`:`${e}`}isDateHasCome(){return new Date(this.deadLine).getTime()<=(new Date).getTime()}setSeparator(e=null,t=""){let r="";return"name"===this.separator?r=this.getNameSeparator(e,t):"seconds"!==t&&(r=this.separator),r}getNameSeparator(e,t){return((e,t)=>1===e||e>20&&1==+String(e)[1]?t[0]:e>1&&e<5||e>21&&+String(e)[1]>1&&+String(e)[1]<5?t[1]:0===e||e>4&&e<21||e>21&&+String(e)[1]>4||0==+String(e)[1]?t[2]:void 0)(+e,{days:["день","дня","дней"],hours:["час","часа","часов"],minutes:["минута","минуты","минут"],seconds:["секунда","секунды","секунд"]}[t])}}({timerSelector:"#timer",format:{daysSelector:"#timer-days",hoursSelector:"#timer-hours",minutesSelector:"#timer-minutes",secondsSelector:"#timer-seconds"},doubleZero:!0,separator:"name"}).start(),new class{constructor(){this.setEventListener()}setEventListener(){document.addEventListener("input",(e=>{this.validation(e)}))}calcValidation(e){e.value=e.value.replace(/[^\d]/g,"")}formFieldsValidation(e){const{name:t,value:r,type:s}=e;"text"===s||"user_message"===t?e.value=r.replace(/[^а-я -]/gi,""):"email"===s?e.value=r.replace(/[^a-z0-9@\-_.!~*']/gi,""):"tel"===s&&(e.value=r.replace(/[^0-9()\-]/g,""))}validation(e){const{target:t}=e,r=t.closest("#calc"),s=t.closest("form");r&&this.calcValidation(t),s&&this.formFieldsValidation(t)}}})();